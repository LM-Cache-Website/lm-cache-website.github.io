Search.setIndex({"alltitles": {"3 Min Quick Example: Docker + Speedup with vLLM": [[27, null]], "Advanced": [[28, null]], "Building Docker from Source": [[25, "building-docker-from-source"]], "Clean up": [[27, "clean-up"]], "Configuration": [[28, null]], "Configuring LMCache": [[15, null]], "Detailed Examples": [[28, null]], "Developer Documentation": [[28, null]], "Docker Installation": [[25, null]], "Documentation": [[28, "documentation"]], "End-to-end measurements": [[23, null]], "Getting Started": [[28, null]], "How to:": [[21, "how-to"], [22, "how-to"], [24, "how-to"]], "Install released versions": [[26, "install-released-versions"]], "Install the latest code": [[26, "install-the-latest-code"]], "Instance-Level Overview": [[19, "instance-level-overview"]], "Inter-Instance Overview": [[19, "inter-instance-overview"]], "Introduction": [[27, "introduction"]], "KV blending": [[21, null]], "LLM Engine": [[16, null]], "LMCache Backend": [[17, null]], "LMCache Blend": [[1, null]], "LMCache Engine": [[18, null]], "LMCache Modules": [[0, null]], "LMCache Overview": [[19, null]], "LMCache Server": [[7, null]], "LMCache Storage Backend": [[9, null]], "Models": [[28, null]], "Module contents": [[1, "module-lmcache.blend"], [2, "module-contents"], [3, "module-contents"], [4, "module-contents"], [5, "module-contents"], [6, "module-contents"], [11, "module-lmcache.storage_backend.evictor"], [12, "module-lmcache.storage_backend.mem_pool"]], "Performance metrics": [[23, "performance-metrics"]], "Pip Installation": [[26, null]], "Prerequisites": [[27, "prerequisites"]], "Pulling the Docker Image:": [[25, "pulling-the-docker-image"]], "Quickstart": [[26, "quickstart"]], "Requirements": [[26, "requirements"]], "Run the demo": [[27, "run-the-demo"]], "Running further tests": [[23, "running-further-tests"]], "Running the Docker Container": [[25, "running-the-docker-container"]], "Running the tests": [[23, "running-the-tests"]], "Saving the decode cache": [[24, null]], "Selecting a backend": [[20, null]], "Submodules": [[0, "submodules"], [1, "submodules"], [2, "submodules"], [3, "submodules"], [4, "submodules"], [6, "submodules"], [8, "submodules"], [9, "submodules"], [10, "submodules"], [11, "submodules"], [12, "submodules"], [13, "submodules"]], "Subpackages": [[0, "subpackages"], [2, "subpackages"], [3, "subpackages"], [5, "subpackages"], [7, "subpackages"], [9, "subpackages"]], "Supported Models": [[29, null]], "Testing the Docker Container": [[25, "testing-the-docker-container"]], "Usage": [[22, null]], "Using a YAML configuration file": [[15, "using-a-yaml-configuration-file"]], "Using environment variables": [[15, "using-environment-variables"]], "Version Comapatibility Matrix": [[26, "version-comapatibility-matrix"]], "Welcome to LMCache!": [[28, null]], "What happens when you run the demo?": [[27, "what-happens-when-you-run-the-demo"]], "What steps do you need to perform?": [[27, "what-steps-do-you-need-to-perform"]], "What\u2019s next?": [[28, "what-s-next"]], "lmcache": [[14, null]], "lmcache.blend.executor module": [[1, "module-lmcache.blend.executor"]], "lmcache.blend.interfaces module": [[1, "module-lmcache.blend.interfaces"]], "lmcache.blend.retriever module": [[1, "module-lmcache.blend.retriever"]], "lmcache.experimental package": [[2, null]], "lmcache.experimental.cache_engine module": [[2, "lmcache-experimental-cache-engine-module"]], "lmcache.experimental.config module": [[2, "lmcache-experimental-config-module"]], "lmcache.experimental.gpu_connector module": [[2, "lmcache-experimental-gpu-connector-module"]], "lmcache.experimental.memory_management module": [[2, "lmcache-experimental-memory-management-module"]], "lmcache.experimental.storage_backend package": [[3, null]], "lmcache.experimental.storage_backend.abstract_backend module": [[3, "lmcache-experimental-storage-backend-abstract-backend-module"]], "lmcache.experimental.storage_backend.evictor package": [[4, null]], "lmcache.experimental.storage_backend.evictor.base_evictor module": [[4, "lmcache-experimental-storage-backend-evictor-base-evictor-module"]], "lmcache.experimental.storage_backend.evictor.lru_evictor module": [[4, "lmcache-experimental-storage-backend-evictor-lru-evictor-module"]], "lmcache.experimental.storage_backend.local_disk_backend module": [[3, "lmcache-experimental-storage-backend-local-disk-backend-module"]], "lmcache.experimental.storage_backend.storage_manager module": [[3, "lmcache-experimental-storage-backend-storage-manager-module"]], "lmcache.experimental.token_database module": [[2, "lmcache-experimental-token-database-module"]], "lmcache.integration package": [[5, null]], "lmcache.integration.vllm package": [[6, null]], "lmcache.integration.vllm.utils module": [[6, "lmcache-integration-vllm-utils-module"]], "lmcache.integration.vllm.vllm_adapter module": [[6, "lmcache-integration-vllm-vllm-adapter-module"]], "lmcache.logging module": [[0, "module-lmcache.logging"]], "lmcache.protocol module": [[0, "module-lmcache.protocol"]], "lmcache.server.server_storage_backend package": [[8, null]], "lmcache.server.server_storage_backend.abstract_backend module": [[8, "module-lmcache.server.server_storage_backend.abstract_backend"]], "lmcache.server.server_storage_backend.local_backend module": [[8, "module-lmcache.server.server_storage_backend.local_backend"]], "lmcache.storage_backend.abstract_backend module": [[9, "module-lmcache.storage_backend.abstract_backend"]], "lmcache.storage_backend.connector package": [[10, null]], "lmcache.storage_backend.connector.base_connector module": [[10, "module-lmcache.storage_backend.connector.base_connector"]], "lmcache.storage_backend.connector.lm_connector module": [[10, "module-lmcache.storage_backend.connector.lm_connector"]], "lmcache.storage_backend.connector.redis_connector module": [[10, "module-lmcache.storage_backend.connector.redis_connector"]], "lmcache.storage_backend.evictor package": [[11, null]], "lmcache.storage_backend.evictor.base_evictor module": [[11, "module-lmcache.storage_backend.evictor.base_evictor"]], "lmcache.storage_backend.evictor.lru_evictor module": [[11, "module-lmcache.storage_backend.evictor.lru_evictor"]], "lmcache.storage_backend.hybrid_backend module": [[9, "module-lmcache.storage_backend.hybrid_backend"]], "lmcache.storage_backend.local_backend module": [[9, "module-lmcache.storage_backend.local_backend"]], "lmcache.storage_backend.mem_pool package": [[12, null]], "lmcache.storage_backend.mem_pool.base_pool module": [[12, "module-lmcache.storage_backend.mem_pool.base_pool"]], "lmcache.storage_backend.mem_pool.local_pool module": [[12, "module-lmcache.storage_backend.mem_pool.local_pool"]], "lmcache.storage_backend.remote_backend module": [[9, "module-lmcache.storage_backend.remote_backend"]], "lmcache.storage_backend.serde package": [[13, null]], "lmcache.storage_backend.serde.cachegen_basics module": [[13, "module-lmcache.storage_backend.serde.cachegen_basics"]], "lmcache.storage_backend.serde.cachegen_decoder module": [[13, "module-lmcache.storage_backend.serde.cachegen_decoder"]], "lmcache.storage_backend.serde.cachegen_encoder module": [[13, "module-lmcache.storage_backend.serde.cachegen_encoder"]], "lmcache.storage_backend.serde.fast_serde module": [[13, "module-lmcache.storage_backend.serde.fast_serde"]], "lmcache.storage_backend.serde.safe_serde module": [[13, "module-lmcache.storage_backend.serde.safe_serde"]], "lmcache.storage_backend.serde.serde module": [[13, "module-lmcache.storage_backend.serde.serde"]], "lmcache.storage_backend.serde.torch_serde module": [[13, "module-lmcache.storage_backend.serde.torch_serde"]], "lmcache.utils module": [[0, "module-lmcache.utils"]]}, "docnames": ["advanced/lmcache", "advanced/lmcache.blend", "advanced/lmcache.experimental", "advanced/lmcache.experimental.storage_backend", "advanced/lmcache.experimental.storage_backend.evictor", "advanced/lmcache.integration", "advanced/lmcache.integration.vllm", "advanced/lmcache.server", "advanced/lmcache.server.server_storage_backend", "advanced/lmcache.storage_backend", "advanced/lmcache.storage_backend.connector", "advanced/lmcache.storage_backend.evictor", "advanced/lmcache.storage_backend.mem_pool", "advanced/lmcache.storage_backend.serde", "advanced/modules", "configuration/config", "developer_tutorial/LLM_Engine", "developer_tutorial/LMCache_Backend", "developer_tutorial/LMCache_Engine", "developer_tutorial/overview", "examples/backend", "examples/kv_blending", "examples/launching", "examples/measuring_improvements", "examples/save_decode", "getting_started/docker", "getting_started/installation", "getting_started/speedup", "index", "models/models"], "envversion": {"sphinx": 62, "sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1}, "filenames": ["advanced/lmcache.rst", "advanced/lmcache.blend.rst", "advanced/lmcache.experimental.rst", "advanced/lmcache.experimental.storage_backend.rst", "advanced/lmcache.experimental.storage_backend.evictor.rst", "advanced/lmcache.integration.rst", "advanced/lmcache.integration.vllm.rst", "advanced/lmcache.server.rst", "advanced/lmcache.server.server_storage_backend.rst", "advanced/lmcache.storage_backend.rst", "advanced/lmcache.storage_backend.connector.rst", "advanced/lmcache.storage_backend.evictor.rst", "advanced/lmcache.storage_backend.mem_pool.rst", "advanced/lmcache.storage_backend.serde.rst", "advanced/modules.rst", "configuration/config.rst", "developer_tutorial/LLM_Engine.rst", "developer_tutorial/LMCache_Backend.rst", "developer_tutorial/LMCache_Engine.rst", "developer_tutorial/overview.rst", "examples/backend.rst", "examples/kv_blending.rst", "examples/launching.rst", "examples/measuring_improvements.rst", "examples/save_decode.rst", "getting_started/docker.rst", "getting_started/installation.rst", "getting_started/speedup.rst", "index.rst", "models/models.rst"], "indexentries": {}, "objects": {"lmcache": [[1, 0, 0, "-", "blend"], [18, 0, 0, "-", "cache_engine"], [0, 0, 0, "-", "logging"], [0, 0, 0, "-", "protocol"], [0, 0, 0, "-", "utils"]], "lmcache.blend": [[1, 0, 0, "-", "executor"], [1, 0, 0, "-", "interfaces"], [1, 0, 0, "-", "retriever"]], "lmcache.blend.executor": [[1, 1, 1, "", "CacheBlendImpl"], [1, 3, 1, "", "create_index"], [1, 3, 1, "", "indices_to_mask"], [1, 3, 1, "", "mask_to_indices"]], "lmcache.blend.executor.CacheBlendImpl": [[1, 2, 1, "", "blend"], [1, 2, 1, "", "set_positional_encoder"], [1, 2, 1, "", "set_reverse_positional_encoder"]], "lmcache.blend.interfaces": [[1, 1, 1, "", "BlendExecutor"], [1, 1, 1, "", "BlendOutput"], [1, 1, 1, "", "BlendRetriever"], [1, 1, 1, "", "BlendRetrieverResult"], [1, 1, 1, "", "BlendRetrieverTask"]], "lmcache.blend.interfaces.BlendExecutor": [[1, 2, 1, "", "blend"]], "lmcache.blend.interfaces.BlendOutput": [[1, 4, 1, "", "k"], [1, 4, 1, "", "local_indices"], [1, 4, 1, "", "positions"], [1, 4, 1, "", "q"], [1, 4, 1, "", "query_start_loc"], [1, 4, 1, "", "v"]], "lmcache.blend.interfaces.BlendRetriever": [[1, 2, 1, "", "new_request"]], "lmcache.blend.interfaces.BlendRetrieverResult": [[1, 4, 1, "", "k"], [1, 4, 1, "", "original_positions"], [1, 4, 1, "", "v"], [1, 4, 1, "", "valid_mask"]], "lmcache.blend.interfaces.BlendRetrieverTask": [[1, 2, 1, "", "result"]], "lmcache.blend.retriever": [[1, 1, 1, "", "SPTBlendRetriever"], [1, 1, 1, "", "SPTBlendRetrieverTask"]], "lmcache.blend.retriever.SPTBlendRetriever": [[1, 2, 1, "", "drop_spt_and_get_indices"], [1, 2, 1, "", "new_request"]], "lmcache.blend.retriever.SPTBlendRetrieverTask": [[1, 2, 1, "", "result"]], "lmcache.cache_engine": [[18, 1, 1, "", "LMCacheEngine"]], "lmcache.cache_engine.LMCacheEngine": [[18, 2, 1, "", "_blob_to_tuple_kv"], [18, 2, 1, "", "_chunk_kv"], [18, 2, 1, "", "_chunk_tokens"], [18, 2, 1, "", "_get_init_hash"], [18, 2, 1, "", "_hash"], [18, 2, 1, "", "_make_chunks"], [18, 2, 1, "", "_make_chunks_skip_existing"], [18, 2, 1, "", "_make_key"], [18, 2, 1, "", "_num_tokens_in_kv"], [18, 2, 1, "", "_prefix_hash"], [18, 2, 1, "", "_slice_kv_at"], [18, 2, 1, "", "_tuple_kv_to_blob"], [18, 2, 1, "", "close"], [18, 2, 1, "", "lookup"], [18, 2, 1, "", "retrieve"], [18, 2, 1, "", "store"]], "lmcache.logging": [[0, 3, 1, "", "init_logger"]], "lmcache.protocol": [[0, 1, 1, "", "ClientMetaMessage"], [0, 1, 1, "", "Constants"], [0, 1, 1, "", "ServerMetaMessage"]], "lmcache.protocol.ClientMetaMessage": [[0, 4, 1, "", "command"], [0, 2, 1, "", "deserialize"], [0, 4, 1, "", "key"], [0, 4, 1, "", "length"], [0, 2, 1, "", "packlength"], [0, 2, 1, "", "serialize"]], "lmcache.protocol.Constants": [[0, 4, 1, "", "CLIENT_EXIST"], [0, 4, 1, "", "CLIENT_GET"], [0, 4, 1, "", "CLIENT_LIST"], [0, 4, 1, "", "CLIENT_PUT"], [0, 4, 1, "", "SERVER_FAIL"], [0, 4, 1, "", "SERVER_SUCCESS"]], "lmcache.protocol.ServerMetaMessage": [[0, 4, 1, "", "code"], [0, 2, 1, "", "deserialize"], [0, 4, 1, "", "length"], [0, 2, 1, "", "packlength"], [0, 2, 1, "", "serialize"]], "lmcache.server.server_storage_backend": [[8, 0, 0, "-", "abstract_backend"], [8, 0, 0, "-", "local_backend"]], "lmcache.server.server_storage_backend.abstract_backend": [[8, 1, 1, "", "LMSBackendInterface"]], "lmcache.server.server_storage_backend.abstract_backend.LMSBackendInterface": [[8, 2, 1, "", "close"], [8, 2, 1, "", "contains"], [8, 2, 1, "", "get"], [8, 2, 1, "", "list_keys"], [8, 2, 1, "", "put"]], "lmcache.server.server_storage_backend.local_backend": [[8, 1, 1, "", "LMSLocalBackend"], [8, 1, 1, "", "LMSLocalDiskBackend"]], "lmcache.server.server_storage_backend.local_backend.LMSLocalBackend": [[8, 2, 1, "", "close"], [8, 2, 1, "", "contains"], [8, 2, 1, "", "get"], [8, 2, 1, "", "list_keys"], [8, 2, 1, "", "put"], [8, 2, 1, "", "remove"]], "lmcache.server.server_storage_backend.local_backend.LMSLocalDiskBackend": [[8, 2, 1, "", "close"], [8, 2, 1, "", "contains"], [8, 2, 1, "", "get"], [8, 2, 1, "", "list_keys"], [8, 2, 1, "", "put"], [8, 2, 1, "", "remove"]], "lmcache.storage_backend": [[17, 0, 0, "-", "abstract_backend"], [11, 0, 0, "-", "evictor"], [9, 0, 0, "-", "hybrid_backend"], [9, 0, 0, "-", "local_backend"], [12, 0, 0, "-", "mem_pool"], [9, 0, 0, "-", "remote_backend"]], "lmcache.storage_backend.abstract_backend": [[17, 1, 1, "", "LMCBackendInterface"]], "lmcache.storage_backend.abstract_backend.LMCBackendInterface": [[17, 2, 1, "", "batched_get"], [17, 2, 1, "", "batched_put"], [17, 2, 1, "", "close"], [17, 2, 1, "", "contains"], [17, 2, 1, "", "get"], [17, 2, 1, "", "put"]], "lmcache.storage_backend.connector": [[10, 0, 0, "-", "base_connector"], [10, 0, 0, "-", "lm_connector"], [10, 0, 0, "-", "redis_connector"]], "lmcache.storage_backend.connector.base_connector": [[10, 1, 1, "", "ConnectorType"], [10, 1, 1, "", "RemoteBytesConnector"], [10, 1, 1, "", "RemoteConnector"], [10, 1, 1, "", "RemoteConnectorDebugWrapper"], [10, 1, 1, "", "RemoteTensorConnector"], [10, 3, 1, "", "check_connector_type"]], "lmcache.storage_backend.connector.base_connector.ConnectorType": [[10, 4, 1, "", "BYTES"], [10, 4, 1, "", "TENSOR"]], "lmcache.storage_backend.connector.base_connector.RemoteConnector": [[10, 2, 1, "", "close"], [10, 2, 1, "", "exists"], [10, 2, 1, "", "get"], [10, 2, 1, "", "list"], [10, 2, 1, "", "set"]], "lmcache.storage_backend.connector.base_connector.RemoteConnectorDebugWrapper": [[10, 2, 1, "", "close"], [10, 2, 1, "", "exists"], [10, 2, 1, "", "get"], [10, 2, 1, "", "list"], [10, 2, 1, "", "set"]], "lmcache.storage_backend.connector.lm_connector": [[10, 1, 1, "", "LMCServerConnector"]], "lmcache.storage_backend.connector.lm_connector.LMCServerConnector": [[10, 2, 1, "", "close"], [10, 2, 1, "", "exists"], [10, 2, 1, "", "get"], [10, 2, 1, "", "list"], [10, 2, 1, "", "receive_all"], [10, 2, 1, "", "send_all"], [10, 2, 1, "", "set"]], "lmcache.storage_backend.connector.redis_connector": [[10, 1, 1, "", "RedisConnector"], [10, 1, 1, "", "RedisSentinelConnector"]], "lmcache.storage_backend.connector.redis_connector.RedisConnector": [[10, 2, 1, "", "close"], [10, 2, 1, "", "exists"], [10, 2, 1, "", "get"], [10, 2, 1, "", "list"], [10, 2, 1, "", "set"]], "lmcache.storage_backend.connector.redis_connector.RedisSentinelConnector": [[10, 4, 1, "", "ENV_REDIS_SERVICE_NAME"], [10, 4, 1, "", "ENV_REDIS_TIMEOUT"], [10, 2, 1, "", "close"], [10, 2, 1, "", "exists"], [10, 2, 1, "", "get"], [10, 2, 1, "", "list"], [10, 2, 1, "", "set"]], "lmcache.storage_backend.evictor": [[11, 1, 1, "", "DummyEvictor"], [11, 1, 1, "", "LRUEvictor"], [11, 0, 0, "-", "base_evictor"], [11, 0, 0, "-", "lru_evictor"]], "lmcache.storage_backend.evictor.DummyEvictor": [[11, 2, 1, "", "update_on_get"], [11, 2, 1, "", "update_on_put"]], "lmcache.storage_backend.evictor.LRUEvictor": [[11, 2, 1, "", "update_on_get"], [11, 2, 1, "", "update_on_put"]], "lmcache.storage_backend.evictor.base_evictor": [[11, 1, 1, "", "BaseEvictor"], [11, 1, 1, "", "DummyEvictor"], [11, 1, 1, "", "PutStatus"]], "lmcache.storage_backend.evictor.base_evictor.BaseEvictor": [[11, 2, 1, "", "get_size"], [11, 2, 1, "", "update_on_get"], [11, 2, 1, "", "update_on_put"]], "lmcache.storage_backend.evictor.base_evictor.DummyEvictor": [[11, 2, 1, "", "update_on_get"], [11, 2, 1, "", "update_on_put"]], "lmcache.storage_backend.evictor.base_evictor.PutStatus": [[11, 4, 1, "", "ILLEGAL"], [11, 4, 1, "", "LEGAL"]], "lmcache.storage_backend.evictor.lru_evictor": [[11, 1, 1, "", "LRUEvictor"]], "lmcache.storage_backend.evictor.lru_evictor.LRUEvictor": [[11, 2, 1, "", "update_on_get"], [11, 2, 1, "", "update_on_put"]], "lmcache.storage_backend.hybrid_backend": [[9, 1, 1, "", "LMCHybridBackend"]], "lmcache.storage_backend.hybrid_backend.LMCHybridBackend": [[9, 2, 1, "", "batched_get"], [9, 2, 1, "", "close"], [9, 2, 1, "", "contains"], [9, 2, 1, "", "get"], [9, 2, 1, "", "put"]], "lmcache.storage_backend.local_backend": [[9, 1, 1, "", "LMCLocalBackend"], [9, 1, 1, "", "LMCLocalDiskBackend"], [9, 1, 1, "", "LocalBackendEndSignal"], [9, 3, 1, "", "save_disk"]], "lmcache.storage_backend.local_backend.LMCLocalBackend": [[9, 2, 1, "", "close"], [9, 2, 1, "", "contains"], [9, 2, 1, "", "get"], [9, 2, 1, "", "put"], [9, 2, 1, "", "put_blocking"], [9, 2, 1, "", "put_nonblocking"], [9, 2, 1, "", "put_worker"], [9, 2, 1, "", "remove"]], "lmcache.storage_backend.local_backend.LMCLocalDiskBackend": [[9, 2, 1, "", "buffer_sweeper"], [9, 2, 1, "", "close"], [9, 2, 1, "", "contains"], [9, 2, 1, "", "get"], [9, 2, 1, "", "put"], [9, 2, 1, "", "put_blocking"], [9, 2, 1, "", "put_nonblocking"], [9, 2, 1, "", "put_worker"], [9, 2, 1, "", "remove"]], "lmcache.storage_backend.mem_pool": [[12, 1, 1, "", "KVObj"], [12, 1, 1, "", "LocalCPUBufferPool"], [12, 1, 1, "", "LocalCPUPool"], [12, 1, 1, "", "LocalGPUPool"], [12, 1, 1, "", "LocalPool"], [12, 0, 0, "-", "base_pool"], [12, 0, 0, "-", "local_pool"]], "lmcache.storage_backend.mem_pool.KVObj": [[12, 4, 1, "", "chunk_idx"], [12, 4, 1, "", "data"], [12, 4, 1, "", "size"]], "lmcache.storage_backend.mem_pool.LocalCPUBufferPool": [[12, 2, 1, "", "allocate"]], "lmcache.storage_backend.mem_pool.LocalPool": [[12, 2, 1, "", "allocate"], [12, 2, 1, "", "free"], [12, 2, 1, "", "init_max_chunk_num"]], "lmcache.storage_backend.mem_pool.base_pool": [[12, 1, 1, "", "BasePool"], [12, 1, 1, "", "KVObj"]], "lmcache.storage_backend.mem_pool.base_pool.BasePool": [[12, 2, 1, "", "allocate"], [12, 2, 1, "", "free"]], "lmcache.storage_backend.mem_pool.base_pool.KVObj": [[12, 4, 1, "", "chunk_idx"], [12, 4, 1, "", "data"], [12, 4, 1, "", "size"]], "lmcache.storage_backend.mem_pool.local_pool": [[12, 1, 1, "", "LocalCPUBufferPool"], [12, 1, 1, "", "LocalCPUPool"], [12, 1, 1, "", "LocalGPUPool"], [12, 1, 1, "", "LocalPool"]], "lmcache.storage_backend.mem_pool.local_pool.LocalCPUBufferPool": [[12, 2, 1, "", "allocate"]], "lmcache.storage_backend.mem_pool.local_pool.LocalPool": [[12, 2, 1, "", "allocate"], [12, 2, 1, "", "free"], [12, 2, 1, "", "init_max_chunk_num"]], "lmcache.storage_backend.remote_backend": [[9, 1, 1, "", "LMCPipelinedRemoteBackend"], [9, 1, 1, "", "LMCRemoteBackend"], [9, 1, 1, "", "RemoteBackendEndSignal"]], "lmcache.storage_backend.remote_backend.LMCPipelinedRemoteBackend": [[9, 2, 1, "", "batched_get"], [9, 2, 1, "", "close"], [9, 2, 1, "", "deserialize_worker"], [9, 2, 1, "", "network_worker"]], "lmcache.storage_backend.remote_backend.LMCRemoteBackend": [[9, 2, 1, "", "close"], [9, 2, 1, "", "contains"], [9, 2, 1, "", "get"], [9, 2, 1, "", "list"], [9, 2, 1, "", "put"], [9, 2, 1, "", "put_blocking"], [9, 2, 1, "", "put_worker"]], "lmcache.storage_backend.serde": [[13, 0, 0, "-", "cachegen_basics"], [13, 0, 0, "-", "cachegen_decoder"], [13, 0, 0, "-", "cachegen_encoder"], [13, 0, 0, "-", "fast_serde"], [13, 0, 0, "-", "safe_serde"], [13, 0, 0, "-", "serde"], [13, 0, 0, "-", "torch_serde"]], "lmcache.storage_backend.serde.cachegen_basics": [[13, 1, 1, "", "CacheGenConfig"], [13, 1, 1, "", "CacheGenEncoderOutput"], [13, 1, 1, "", "CacheGenGPUBytestream"], [13, 1, 1, "", "CacheGenGPUEncoderOutput"], [13, 1, 1, "", "QuantizationSpec"]], "lmcache.storage_backend.serde.cachegen_basics.CacheGenConfig": [[13, 2, 1, "", "from_model_name"], [13, 4, 1, "", "kspecs"], [13, 4, 1, "", "nlayers"], [13, 4, 1, "", "vspecs"]], "lmcache.storage_backend.serde.cachegen_basics.CacheGenEncoderOutput": [[13, 4, 1, "", "bytestream"], [13, 4, 1, "", "cdf"], [13, 2, 1, "", "from_bytes"], [13, 4, 1, "", "head_size"], [13, 4, 1, "", "max_tensors_key"], [13, 4, 1, "", "max_tensors_value"], [13, 4, 1, "", "num_heads"], [13, 4, 1, "", "start_indices"], [13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.cachegen_basics.CacheGenGPUBytestream": [[13, 4, 1, "", "bytestream"], [13, 4, 1, "", "bytestream_lengths"], [13, 4, 1, "", "ntokens"]], "lmcache.storage_backend.serde.cachegen_basics.CacheGenGPUEncoderOutput": [[13, 4, 1, "", "cdf"], [13, 4, 1, "", "data_chunks"], [13, 2, 1, "", "debug_print_device"], [13, 2, 1, "", "from_bytes"], [13, 4, 1, "", "head_size"], [13, 4, 1, "", "max_tensors_key"], [13, 4, 1, "", "max_tensors_value"], [13, 4, 1, "", "num_heads"], [13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.cachegen_basics.QuantizationSpec": [[13, 4, 1, "", "bins"], [13, 4, 1, "", "end_layer"], [13, 4, 1, "", "start_layer"]], "lmcache.storage_backend.serde.cachegen_decoder": [[13, 1, 1, "", "CacheGenDeserializer"], [13, 3, 1, "", "decode_chunk"], [13, 3, 1, "", "decode_function_gpu"], [13, 3, 1, "", "do_dequantize"], [13, 3, 1, "", "quant"], [13, 3, 1, "", "recombine_bytes"]], "lmcache.storage_backend.serde.cachegen_decoder.CacheGenDeserializer": [[13, 2, 1, "", "from_bytes"], [13, 2, 1, "", "get_output_buffer"], [13, 2, 1, "", "make_key_bins"], [13, 2, 1, "", "make_value_bins"]], "lmcache.storage_backend.serde.cachegen_encoder": [[13, 1, 1, "", "CacheGenEncoderImpl"], [13, 1, 1, "", "CacheGenSerializer"], [13, 3, 1, "", "collect_bytes"], [13, 3, 1, "", "concat_max"], [13, 3, 1, "", "encode_function"], [13, 3, 1, "", "encode_ntokens"], [13, 3, 1, "", "torch_quant"], [13, 3, 1, "", "torch_quant_vectorized"]], "lmcache.storage_backend.serde.cachegen_encoder.CacheGenEncoderImpl": [[13, 2, 1, "", "compute_cdf"], [13, 2, 1, "", "quantize"]], "lmcache.storage_backend.serde.cachegen_encoder.CacheGenSerializer": [[13, 2, 1, "", "make_key_bins"], [13, 2, 1, "", "make_value_bins"], [13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.fast_serde": [[13, 1, 1, "", "FastDeserializer"], [13, 1, 1, "", "FastSerializer"]], "lmcache.storage_backend.serde.fast_serde.FastDeserializer": [[13, 2, 1, "", "from_bytes"], [13, 2, 1, "", "from_bytes_normal"]], "lmcache.storage_backend.serde.fast_serde.FastSerializer": [[13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.safe_serde": [[13, 1, 1, "", "SafeDeserializer"], [13, 1, 1, "", "SafeSerializer"]], "lmcache.storage_backend.serde.safe_serde.SafeDeserializer": [[13, 2, 1, "", "from_bytes"], [13, 2, 1, "", "from_bytes_normal"]], "lmcache.storage_backend.serde.safe_serde.SafeSerializer": [[13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.serde": [[13, 1, 1, "", "Deserializer"], [13, 1, 1, "", "DeserializerDebugWrapper"], [13, 1, 1, "", "Serializer"], [13, 1, 1, "", "SerializerDebugWrapper"]], "lmcache.storage_backend.serde.serde.Deserializer": [[13, 2, 1, "", "from_bytes"]], "lmcache.storage_backend.serde.serde.DeserializerDebugWrapper": [[13, 2, 1, "", "from_bytes"]], "lmcache.storage_backend.serde.serde.Serializer": [[13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.serde.SerializerDebugWrapper": [[13, 2, 1, "", "to_bytes"]], "lmcache.storage_backend.serde.torch_serde": [[13, 1, 1, "", "TorchDeserializer"], [13, 1, 1, "", "TorchSerializer"]], "lmcache.storage_backend.serde.torch_serde.TorchDeserializer": [[13, 2, 1, "", "from_bytes"], [13, 2, 1, "", "from_bytes_normal"]], "lmcache.storage_backend.serde.torch_serde.TorchSerializer": [[13, 2, 1, "", "to_bytes"]], "lmcache.utils": [[0, 1, 1, "", "CacheEngineKey"], [0, 1, 1, "", "DiskCacheMetadata"]], "lmcache.utils.CacheEngineKey": [[0, 4, 1, "", "chunk_hash"], [0, 4, 1, "", "fmt"], [0, 2, 1, "", "from_string"], [0, 4, 1, "", "model_name"], [0, 2, 1, "", "to_string"], [0, 4, 1, "", "worker_id"], [0, 4, 1, "", "world_size"]], "lmcache.utils.DiskCacheMetadata": [[0, 4, 1, "", "path"], [0, 4, 1, "", "size"]]}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"], "4": ["py", "attribute", "Python attribute"]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function", "4": "py:attribute"}, "terms": {"": [0, 1, 13, 16, 19, 20, 21, 22, 26, 27, 29], "0": [1, 11, 15, 18, 20, 21, 22, 24, 25, 26], "1": [0, 1, 10, 11, 13, 21, 22, 23, 24, 25, 26, 29], "10": [11, 23, 24, 26, 27], "100": [26, 29], "1024": [22, 24], "10x": 28, "12": 26, "127": 25, "150": 25, "16384": 23, "16k": [22, 26], "1b": 25, "2": [0, 10, 11, 13, 18, 21, 22, 24, 25, 26, 27, 29], "200": 0, "256": [15, 20, 21, 22, 24, 25], "26379": [10, 15], "26380": 10, "26381": 10, "3": [0, 21, 23, 25, 26, 28, 29], "30": 21, "32768": [22, 24], "32k": 29, "3f": 21, "3gb": 27, "4": [0, 25, 26, 27, 29], "400": 0, "5": [15, 29], "5k": 24, "6": 26, "65432": [15, 20, 22], "6x": 27, "7": [21, 25], "70b": 25, "7b": [21, 22, 24, 26, 27, 29], "8": [22, 24, 26], "8000": [22, 23, 25], "8001": 22, "8501": 27, "8b": [23, 29], "95": [21, 22, 24], "9b": 29, "A": [1, 9, 10, 27], "As": [26, 27], "By": 28, "For": [18, 19, 23, 25, 26, 27, 29], "If": [1, 16, 19, 25, 27], "In": [16, 20, 25, 27], "It": [1, 9, 16, 28], "NOT": [1, 8, 9, 17, 18], "The": [1, 8, 9, 10, 13, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 26, 27], "Then": 22, "There": 15, "These": 19, "To": [15, 16, 19, 23, 25, 26, 29], "Will": [1, 18], "__init__": 16, "_blob_to_tuple_kv": 18, "_chunk_kv": 18, "_chunk_token": 18, "_get_init_hash": 18, "_hash": 18, "_log_task_complet": 16, "_make_chunk": 18, "_make_chunks_skip_exist": 18, "_make_kei": 18, "_num_tokens_in_kv": 18, "_prefix_hash": 18, "_slice_kv_at": 18, "_tuple_kv_to_blob": 18, "a40": 27, "a6000": 27, "about": 21, "abov": [21, 22, 24, 27], "abstract": [1, 8, 9, 10, 11, 12, 13, 17], "abstract_backend": [2, 7, 14, 17], "accept": [25, 29], "access": 27, "achiev": 28, "across": [19, 22, 27], "activ": [23, 26], "actual": [12, 16], "ad": 16, "adapt": 16, "add": [16, 25, 26, 29], "add_generation_prompt": 25, "advanc": 21, "after": [1, 16, 18, 19, 27, 29], "ai": 25, "align": 16, "all": [10, 16, 18, 23, 25, 28], "alloc": 12, "allow": [16, 18], "almost": 27, "along": 19, "alreadi": 16, "also": [1, 9, 21, 23, 24, 26], "altern": 25, "although": 26, "an": [15, 18, 19, 22, 23, 24, 25, 26], "ani": [13, 28, 29], "anoth": 27, "answer": [21, 24, 27], "api": 26, "app": 27, "append": [21, 22, 24], "append_output": [22, 24], "appendix": 19, "applic": 25, "apply_chat_templ": [22, 24], "ar": [1, 9, 10, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 27], "arg": 15, "argument": 18, "around": [24, 27], "arriv": 16, "assert": [22, 24], "assist": [22, 24, 25], "assum": [1, 16], "async": 1, "async_llm_engin": 16, "asyncio": 16, "attent": 16, "automodelforcausallm": 27, "autotoken": [22, 24, 27], "avail": [1, 16, 25, 27], "avoid": 18, "b": 13, "backend": [0, 14, 15, 16, 18, 19, 23, 26, 27, 28], "backend_typ": 20, "background": 1, "bandwidth": 27, "base": [1, 8, 9, 10, 11, 12, 13, 16, 19, 27], "base_connector": 9, "base_evictor": [2, 3, 9], "base_pool": 9, "baseevictor": 11, "basepool": 12, "bash": [15, 23, 27], "bashrc": 26, "batch": [1, 8, 9, 13, 17, 18], "batched_get": [9, 17], "batched_put": [9, 17], "becaus": 26, "been": 16, "befor": [8, 9, 16, 17, 20, 26], "below": [18, 23, 25], "better": [1, 23], "between": [16, 27], "big": [8, 9, 17, 18], "bin": [13, 26], "binari": 26, "bind": 20, "blend": [0, 14, 15, 28], "blend_adapt": 21, "blend_min_token": 15, "blend_recompute_ratio": 15, "blendexecutor": 1, "blendoutput": 1, "blendretriev": 1, "blendretrieverresult": 1, "blendretrievertask": 1, "blob": 18, "block": [1, 8, 9, 16, 17, 18], "bool": [8, 9, 10, 15, 16, 17, 18], "boolean": 18, "boost": 24, "bootstrap": 23, "bos_token": 25, "both": [9, 13, 26, 27], "boundari": [10, 11], "break": 18, "bridg": 16, "browser": 27, "buffer": [12, 13], "buffer_s": 13, "buffer_sweep": 9, "build": 16, "build_partial_prefill_input": 16, "byte": [0, 8, 10, 11, 13], "byte_tensor": 13, "bytearrai": [8, 13], "bytes_tensor": 13, "bytestream": 13, "bytestream_length": 13, "c": [26, 27], "cach": [1, 8, 9, 10, 11, 13, 15, 16, 17, 18, 19, 20, 21, 22, 25, 27, 28], "cache_dict": 11, "cache_dir": 27, "cache_engin": [1, 18], "cache_s": 11, "cacheblend": 1, "cacheblendimpl": 1, "cacheenginekei": [0, 9, 11, 14, 17, 18], "cachegen": [15, 19, 20, 22, 23], "cachegen_bas": 9, "cachegen_decod": 9, "cachegen_encod": 9, "cachegenconfig": 13, "cachegendeseri": 13, "cachegenencoderimpl": 13, "cachegenencoderoutput": 13, "cachegengpubytestream": 13, "cachegengpuencoderoutput": 13, "cachegenseri": 13, "call": [8, 9, 16, 17, 20, 23], "callabl": 1, "can": [13, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], "cancel": 16, "cancellederror": 16, "card": 29, "case": [27, 28], "caus": [26, 27], "cd": [23, 26, 27], "cdf": 13, "cdf_int": 13, "central": 19, "chang": [1, 22], "chat": [25, 29], "chat_templ": 25, "check": [8, 9, 10, 16, 18, 19, 23, 26], "check_connector_typ": 10, "children": [8, 9, 17], "chmod": 15, "chunk": [1, 8, 9, 12, 15, 17, 18, 19, 21], "chunk1": 21, "chunk2": 21, "chunk_hash": [0, 14, 18], "chunk_idx": 12, "chunk_kv": 18, "chunk_siz": [13, 15, 18, 20, 21, 22, 24, 25], "class": [0, 1, 8, 9, 10, 11, 12, 13, 16, 17, 18], "cleanup": [8, 9, 17], "clear": [22, 24], "cli": 16, "client": 16, "client_exist": [0, 14], "client_get": [0, 14], "client_list": [0, 14], "client_put": [0, 14], "clientmetamessag": [0, 14], "clone": [23, 26, 27], "close": [8, 9, 10, 16, 17, 18], "close_lmcache_engin": [16, 21, 22, 24], "cluster": 10, "code": [0, 14, 16, 21, 22, 24, 25, 27], "collect": 13, "collect_byt": 13, "com": [23, 26, 27], "combin": [18, 28], "combine_input_prompt_chunk": 21, "come": 11, "comma": 10, "command": [0, 14, 16, 21, 22, 23, 24, 25], "compar": [23, 27], "compat": 26, "compil": 26, "complet": [8, 9, 17, 19, 25], "compon": [16, 19, 26], "compos": 27, "comput": [13, 19, 21], "compute_cdf": 13, "concat_max": 13, "concaten": [13, 18], "concis": 22, "conda": [23, 26], "condit": [16, 29], "config": [9, 10, 13, 18, 20, 22], "configur": [16, 20, 25], "conflict": 27, "connect": 10, "connector": 9, "connectortyp": 10, "consist": [11, 19], "constant": [0, 14], "contain": [1, 8, 9, 10, 13, 17, 22, 23, 24, 26], "content": [9, 14, 22, 24, 25], "context": [21, 23, 24, 27], "context_fil": [21, 22, 24], "context_length": [22, 24], "context_messag": [22, 24], "context_text": [22, 24], "continu": 16, "control": 0, "convers": [24, 25], "convert": 18, "copi": [22, 24], "copyed_context_messag": [22, 24], "core": 16, "correctli": [16, 26], "correspond": [1, 10, 12, 18, 19], "cpu": [1, 8, 9, 15, 19, 20, 21, 22, 23, 24, 25], "creat": [1, 20, 22, 23, 24, 25, 26], "create_index": 1, "credenti": 29, "csv": 23, "ctrl": 27, "cuda": [9, 15, 16, 17, 20, 26], "cuda_hom": 26, "cuda_vers": 26, "cuda_visible_devic": [20, 21, 22, 24], "curl": 25, "current": [11, 16, 18, 19, 23, 29], "custom": [16, 19], "cycl": 28, "d": [13, 25, 27], "data": [9, 10, 12, 13, 16], "data_chunk": 13, "debug_print_devic": 13, "decod": [13, 15, 16, 19, 28], "decode_chunk": 13, "decode_function_gpu": 13, "deepcopi": [22, 24], "def": [16, 22, 24], "default": [10, 15, 20, 27], "defin": [16, 23, 25], "delai": 28, "delimit": 1, "demo4": 27, "demonstr": 23, "depend": [18, 26], "deploy": 25, "descript": 22, "deseri": [0, 13, 14, 19, 20], "deserialize_work": 9, "deserializerdebugwrapp": 13, "destroi": 16, "detail": [18, 19, 23, 24], "determin": 16, "devic": [1, 13, 15, 16, 18], "dict": [11, 13], "dictionari": [18, 19], "differ": [13, 19, 20, 23, 27], "dimens": [1, 8, 9, 17, 18, 19], "directli": 10, "directori": 23, "disk": [8, 9, 19, 20, 27], "diskcachemetadata": [0, 14], "do": [8, 9, 15, 17, 29], "do_dequant": 13, "docker": 28, "document": [21, 22, 27, 29], "doe": [10, 12, 21, 27], "don": 25, "done": [9, 23], "down": [16, 27], "download": 27, "drop": 1, "drop_spt_and_get_indic": 1, "dst_devic": [9, 17], "dtype": 13, "dummyevictor": 11, "dump": [22, 24], "dure": [1, 16], "dynam": 16, "e": [1, 15, 18, 21, 22, 23, 24, 26, 28], "each": [1, 13, 16, 18, 19, 27, 28], "echo": 27, "effici": [16, 18], "either": 18, "elif": 25, "els": 25, "empti": 18, "enabl": [15, 21, 27], "enable_blend": [15, 21], "enable_chunked_prefil": [22, 24], "encod": 13, "encode_funct": 13, "encode_input": 13, "encode_ntoken": 13, "end": [1, 13, 28], "end_lay": 13, "endfor": 25, "endif": 25, "engin": [1, 8, 9, 10, 17, 19, 27, 28], "ensur": 16, "enter": 29, "entir": 19, "entri": 16, "enum": [10, 11], "env": [25, 27], "env_redis_service_nam": 10, "env_redis_timeout": 10, "environ": [10, 23, 26, 27], "eos_token": 25, "etc": [13, 25], "evalu": 16, "evict": 11, "evict_kei": 11, "evictor": [2, 3, 9], "exampl": [1, 10, 21, 22, 23, 25, 26], "except": 16, "execut": 16, "execute_model": 16, "executor": 14, "exist": [9, 10, 16, 18, 19], "exit": [16, 21, 22, 24], "expect": 13, "export": [15, 25, 26], "extend": 24, "external_url": 27, "extra": [10, 18], "f": [21, 22, 23, 24], "fals": [8, 9, 10, 15, 20, 22, 24, 25], "fast": [15, 19, 20], "fast_serd": 9, "fastdeseri": 13, "faster": 27, "fastseri": 13, "fetch": [16, 19], "ffmpeg": [22, 24, 27], "field": 13, "figur": 27, "file": [10, 13, 16, 20, 21, 22, 23, 24, 25, 26], "fin": 21, "final": 23, "finish": 18, "first": [19, 21, 22, 23, 28], "first_output": [22, 24], "first_scheduled_tim": 21, "first_token_tim": 21, "fix": 13, "flag": 25, "float": [1, 11, 13, 15], "float32": 13, "fmt": [0, 1, 14, 18], "folder": 23, "follow": [15, 16, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], "fork": 28, "form": 18, "format": [8, 9, 15, 17, 18, 19, 22, 29], "found": [8, 9, 16, 17, 19, 21, 24], "four": 19, "fp_k": 13, "fp_v": 13, "free": [9, 12], "freed": 12, "fresh": 1, "fresh_k": 1, "fresh_q": 1, "fresh_v": 1, "from": [0, 1, 12, 13, 16, 18, 19, 21, 22, 23, 24, 26, 27, 29], "from_byt": 13, "from_bytes_norm": 13, "from_model_nam": 13, "from_pretrain": [22, 24, 26, 27, 29], "from_str": [0, 14], "frontend": 27, "full": [1, 11, 12], "full_prompt": 1, "function": [1, 9, 10, 16, 18, 23], "futur": [1, 9, 16], "g": [1, 15, 18, 21, 22, 23, 24], "gb": [15, 23], "gen_prompt": [22, 24], "gener": [18, 21, 22, 24, 26, 27, 29], "generated_prompt": [22, 24], "generated_text": [21, 22, 24], "get": [1, 8, 9, 10, 11, 17, 25], "get_context_length": [22, 24], "get_output_buff": 13, "get_siz": 11, "git": [23, 26, 27], "github": [23, 26, 27], "give": 22, "given": [8, 9, 10, 11, 13, 16, 17, 23], "glm": 29, "got": [22, 24], "gpu": [8, 9, 13, 19, 20, 22, 23, 25, 26, 27, 28], "gpu_memory_util": [21, 22, 24], "grace": [21, 22, 24], "gracefulli": 16, "group": 13, "guid": 23, "h": 25, "ha": [1, 16, 18, 26], "happen": [1, 16], "hash": [8, 9, 17, 18], "hasn": 16, "have": [8, 9, 10, 13, 15, 17, 18, 19, 23, 25], "head_siz": [13, 18], "hello": [26, 29], "help": [23, 24, 25], "here": [21, 22, 23, 24, 25, 29], "hf": 27, "hf_token": 27, "hidden_dim": [1, 18], "higher": [23, 26], "highli": 26, "hit": 1, "host": [10, 15, 20, 23, 25], "hosts_and_port": 10, "how": [18, 23, 27], "http": [25, 27], "hub": 25, "hugging_face_hub_token": 25, "huggingfac": [18, 25, 27, 29], "huggingface_hub": 29, "hybrid": 9, "hybrid_backend": 14, "i": [1, 8, 9, 10, 11, 12, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29], "id": 1, "idea": 16, "illeg": 11, "imag": 27, "implement": [1, 9, 16, 19, 25], "import": [16, 21, 22, 24, 26, 27, 29], "improv": 23, "includ": [8, 9, 16, 17, 20, 24, 25, 28], "index": [1, 18, 19], "index0": 25, "index_of_segment2": 1, "indic": [1, 18], "indices_to_mask": 1, "infer": [16, 18, 26, 27, 29], "info": 16, "inform": [22, 23, 24, 27, 29], "init_lmcache_engin": 16, "init_logg": [0, 14], "init_max_chunk_num": 12, "initi": [12, 16], "inject": 11, "input": [1, 8, 9, 10, 11, 12, 13, 16, 18], "input_group": 13, "input_token": 1, "input_tokens_list": 16, "insert": 29, "instal": [23, 27, 28], "instanc": [16, 20, 22, 24, 27, 28], "instruct": [21, 22, 23, 24, 25, 27, 29], "int": [0, 1, 9, 10, 11, 12, 13, 15, 16, 17, 18], "int16": 13, "int32": 13, "int8": 13, "integ": 15, "integr": [16, 26], "interact": 16, "interfac": [10, 11, 12, 14, 26], "intern": 1, "invok": 16, "io": 27, "ip": 27, "ipc": 25, "is_kei": 13, "issu": [26, 27], "iter": [9, 17, 18], "its": 19, "join": [22, 24], "json": [22, 24, 25], "json_dict": [22, 24], "jsonl": [22, 24], "just": 26, "k": [1, 13], "kei": [0, 8, 9, 10, 11, 13, 14, 16, 17, 18], "key_bin": 13, "keys_and_chunk": [9, 17], "know": 27, "kspec": 13, "kv": [1, 8, 9, 11, 12, 13, 15, 16, 17, 18, 19, 20, 22, 23, 24, 27, 28], "kv_blend": 21, "kv_cach": 16, "kv_chunk": [8, 9, 12, 17], "kv_chunk_byt": 8, "kv_obj": [11, 12], "kv_tensor": 18, "kv_tensors_mask": 18, "kv_tensors_raw": 18, "kvobj": [11, 12], "kwarg": 13, "l": 23, "latenc": 23, "later": [16, 27], "latest_dev": [], "launch": [1, 20, 22, 24], "layer": [1, 13], "layer_id": 1, "layers_in_kei": 13, "ld_library_path": 26, "left": 27, "legal": 11, "len": [1, 18, 22, 24], "length": [0, 1, 14, 23], "let": [27, 28], "lib64": 26, "librari": 26, "lifecycl": 16, "like": 26, "line": [15, 22, 23, 27], "link": [25, 26, 28], "linux": 26, "list": [1, 8, 9, 10, 11, 13, 15, 16, 18, 22, 23, 24], "list_kei": 8, "llama": [23, 25, 29], "llm": [19, 21, 22, 24, 26, 28, 29], "lm": [16, 22], "lm_cache_blend_min_token": 15, "lm_cache_blend_recompute_ratio": 15, "lm_cache_chunk_s": 15, "lm_cache_enable_blend": 15, "lm_cache_local_devic": 15, "lm_cache_max_local_cache_s": 15, "lm_cache_pipelined_backend": 15, "lm_cache_remote_serd": 15, "lm_cache_remote_url": 15, "lm_cache_save_decode_cach": 15, "lm_connector": 9, "lmcach": [16, 20, 21, 22, 23, 24, 25, 26, 27, 29], "lmcache_config": 15, "lmcache_config_fil": [15, 20, 21, 22, 24, 25], "lmcache_retrieve_kv": 16, "lmcache_serv": [20, 22], "lmcache_should_retriev": 16, "lmcache_should_stor": 16, "lmcache_store_kv": 16, "lmcache_vllm": [15, 21, 22, 24, 25, 26, 29], "lmcacheengin": [1, 16, 18], "lmcacheengineconfig": [9, 13, 18], "lmcacheenginemetadata": [1, 9, 13, 18], "lmcachemempoolmetadata": [9, 12], "lmcacheserv": 0, "lmcbackendinterfac": [9, 17], "lmchybridbackend": 9, "lmclocalbackend": 9, "lmclocaldiskbackend": 9, "lmcpipelinedremotebackend": 9, "lmcremotebackend": 9, "lmcserverconnector": [0, 10], "lmsbackendinterfac": 8, "lmslocalbackend": 8, "lmslocaldiskbackend": 8, "lmsy": [22, 26, 29], "load": [26, 29], "local": [8, 9, 15, 20, 23, 26, 27], "local_backend": [7, 14], "local_devic": [15, 20, 21, 22, 24, 25], "local_disk": [15, 20], "local_disk_backend": 2, "local_indic": 1, "local_pool": 9, "local_url": 27, "localbackendendsign": 9, "localcpubufferpool": 12, "localcpupool": 12, "localgpupool": 12, "localhost": [10, 15, 20, 22, 27], "localpool": 12, "locat": 1, "log": [14, 23], "logger": [0, 16], "logic": 1, "login": [27, 29], "long": [1, 27], "longchat": [22, 26, 29], "lookup": 18, "loop": 25, "lower": 23, "lp": 13, "lru": 11, "lru_evictor": [2, 3, 9], "lruevictor": 11, "m": 23, "machin": [25, 27], "mai": [1, 19, 23, 25], "main": [19, 23], "mainli": 21, "maintain": 19, "make": [16, 25], "make_key_bin": 13, "make_value_bin": 13, "manag": [18, 26], "mani": [18, 28], "manner": [9, 17], "manual": 27, "mask": [1, 18], "mask_to_indic": 1, "match": [1, 23], "matter": 18, "max": 13, "max1": 13, "max_cache_s": 11, "max_length": [26, 29], "max_local_cache_s": 15, "max_model_len": [22, 24], "max_tensors_kei": 13, "max_tensors_valu": 13, "max_token": [21, 22, 24, 25], "maximum": [12, 13, 15], "maxtensor": 13, "mayb": 1, "me": 22, "mean": 18, "measur": 28, "mechan": [16, 18], "mem": 12, "mem_pool": 9, "memori": [8, 9, 12, 22, 23, 25, 26], "messag": [0, 25], "met": 16, "meta": [23, 25, 29], "metadata": [1, 9, 12, 13, 16, 18], "method": [8, 9, 17, 19], "metric": 21, "might": [12, 27, 29], "min": 28, "minimum": 15, "minut": 27, "miss": 19, "mistral": [21, 22, 24, 27, 29], "mistralai": [21, 22, 24, 27, 29], "model": [16, 18, 21, 22, 24, 25, 26, 27], "model_card": 29, "model_config": 16, "model_execut": 16, "model_input": 16, "model_nam": [0, 13, 14, 22, 24, 27], "model_runn": 16, "modelconfig": 16, "modelinputforgpuwithsamplingmetadata": 16, "modelrunn": 16, "modifi": [1, 16], "modul": [7, 14, 16, 22], "modulefind": 16, "monitor": 23, "more": [19, 21, 23, 27, 29], "movement": 12, "mpool_metadata": 9, "multi": [24, 28], "multipl": [1, 9, 17, 20, 22, 27], "multiprocess": 21, "must": [1, 25], "my": [26, 29], "n": [10, 22, 23, 24, 25, 26], "name": [0, 10, 11, 15, 25, 26, 29], "nccl": 26, "nchannel": 13, "ndim": 1, "necessari": [8, 9, 16, 17, 26], "necessarili": 28, "need": [16, 21, 22, 23, 24, 25], "nest": [8, 9, 18], "network": [19, 25], "network_url": 27, "network_work": 9, "new": [1, 11, 16, 19, 26, 27], "new_request": 1, "newli": 21, "nfirst": [22, 24], "nlayer": 13, "nn": 16, "non": [16, 18, 25], "none": [1, 8, 9, 10, 11, 12, 13, 16, 17, 18, 22, 24], "note": [1, 27], "noth": 1, "now": [21, 22, 24, 27, 29], "nsecond": [22, 24], "ntoken": 13, "num_computed_tokens_list": 16, "num_head": [13, 18], "num_kv_head": 18, "num_lay": 18, "num_skip_chunk": 18, "num_skip_prefix_chunk": 18, "num_token": [1, 18], "number": [1, 9, 12, 13, 15, 17, 18, 22], "nvcc": 26, "nvidia": [25, 27], "o": [22, 23, 24, 26], "obj": 10, "object": [1, 10, 22, 24], "occur": 16, "offer": 25, "offici": 25, "offlin": [22, 26, 29], "offline_infer": [20, 22, 24], "offline_inference_output": [22, 24], "offline_precomput": 21, "offlinekvprecomput": 21, "often": 29, "onc": [20, 23, 27, 28], "one": [10, 22, 27], "onli": [10, 12, 16, 18, 28], "onlin": 26, "open": [21, 22, 24, 27], "openai": [26, 27], "oper": [8, 9, 16, 17, 18], "option": [1, 10, 15, 16, 20], "ordereddict": 11, "origin": [1, 13], "original_posit": 1, "other": [18, 20, 22, 23, 24, 27], "otherwis": [8, 9, 10, 16, 18], "our": 23, "output": [1, 8, 9, 13, 21, 22, 23, 24], "output_buff": 13, "output_fil": [22, 24], "output_file_nam": [22, 24], "output_length": 13, "over": 19, "overrid": [8, 9, 17], "overview": 28, "own": 23, "p": 25, "packag": [7, 9, 16, 26], "packlength": [0, 14], "pair": 10, "paper": 19, "parallel": 16, "parallel_config": 16, "parallelconfig": 16, "param": [1, 13, 22, 24], "paramet": [1, 8, 9, 13, 15, 17, 18], "pardir": [22, 24], "partial": [16, 18], "pass": [1, 15, 22, 24], "path": [0, 8, 9, 13, 14, 20, 22, 24, 25, 26], "pattern": 23, "pdf": 23, "peak": 27, "per": 23, "perf_count": [22, 24], "perform": [12, 16, 19], "pip": [27, 28], "pipelin": [9, 15, 20, 22, 25], "pipelined_backend": [15, 20, 22, 25], "pleas": [20, 23, 24, 25, 26, 27, 29], "plot": 23, "point": 16, "pointer": 12, "pool": [9, 12], "port": [10, 15, 20, 22, 25], "portion": 18, "posit": 1, "positional_encod": 1, "possibl": 15, "post": 25, "post1": [], "post2": 26, "potenti": 27, "pre": [21, 26], "preciou": 28, "precompute_kv": 21, "prefil": [16, 19, 28], "prefix": [1, 8, 9, 17, 18, 27, 28], "prefix_hash": 18, "prepare_environ": 23, "prevent": 27, "primari": 16, "print": [21, 22, 24], "prior": 23, "proce": 16, "process": [16, 19, 23], "process_result": 23, "product": 12, "profil": 16, "program": 16, "project": 19, "prompt": [1, 16, 19, 22, 24, 29], "protocol": 14, "provid": [23, 26], "proxi": 16, "proxymodul": 16, "put": [8, 9, 17], "put_block": 9, "put_nonblock": 9, "put_work": 9, "putstatu": 11, "py": [16, 20, 21, 22, 23, 24], "python": [20, 21, 22, 23, 25, 26, 27, 29], "python3": [23, 24], "pytorch": 13, "q": 1, "qa": [13, 28], "qkv": 1, "qualnam": [10, 11], "quant": 13, "quantiz": 13, "quantizationspec": 13, "queri": [1, 8, 9, 17, 21, 27], "query_start_loc": 1, "question": 21, "quick": [22, 28], "qwen": 29, "r": [21, 22, 24], "rag": 28, "raise_except": 25, "ratio": 15, "re": 25, "read": [9, 21, 22, 24], "real": 21, "rebuild": 16, "receiv": 19, "receive_al": 10, "recenc": 11, "recombine_byt": 13, "recommend": [19, 26], "recomput": 15, "recompute_ratio": 1, "reconstruct": 16, "record": 1, "redi": [10, 15, 20], "redis_connector": 9, "redis_service_nam": 10, "redis_timeout": 10, "redisconnector": 10, "redissentinelconnector": 10, "reduc": 28, "reduct": [19, 28], "redund": 18, "refer": [19, 23, 27, 29], "reflect": 16, "rememb": 20, "remot": [9, 10, 15, 20], "remote_backend": 14, "remote_serd": [15, 20, 22], "remote_url": [10, 15, 20, 22], "remotebackendendsign": 9, "remotebytesconnector": 10, "remoteconnector": 10, "remoteconnectordebugwrapp": 10, "remotetensorconnector": 10, "remov": [8, 9], "replac": 27, "repositori": [16, 19, 23, 25, 26], "request": [1, 16, 19, 22, 23, 24], "requestoutput": [22, 24], "requir": [10, 19, 25, 29], "respons": 16, "rest": 18, "result": [1, 23], "ret_mask": 18, "retriev": [8, 9, 14, 15, 16, 17, 18, 19, 20, 22, 25], "retrieved_k": 1, "retrieved_v": 1, "return": [1, 8, 9, 10, 11, 12, 13, 16, 17, 18, 22, 24], "return_tupl": 18, "reus": [23, 27, 28], "reusabl": [20, 28], "reverse_positional_encod": 1, "right": 27, "roi": 1, "role": [22, 24, 25], "root": 25, "root_directori": 23, "round": 28, "run": [15, 16, 21, 22, 24], "runtim": [25, 27], "safe": 10, "safe_serd": 9, "safedeseri": 13, "safeseri": 13, "safetensor": [15, 19, 20], "same": [1, 13, 18, 23, 26, 27], "sampl": [16, 22, 24], "sampling_param": [22, 24], "sampling_params_gener": 21, "samplingparam": [21, 22, 24], "sata3": 27, "save": [13, 15, 21, 22, 23, 25, 27, 28], "save_decod": 24, "save_decode_cach": [15, 24], "save_disk": 9, "save_pretrain": 27, "score": 24, "script": [16, 23, 27, 29], "seamless": 16, "seamlessli": 16, "second": [10, 21, 22, 23, 24, 27], "second_output": [22, 24], "section": 25, "see": [26, 27], "segmengt": 1, "segment": [1, 25], "select": [1, 28], "self": [13, 16, 18], "send": [10, 16], "send_al": 10, "sent": 1, "sentencepiec": 27, "sentinel": [10, 15], "separ": [10, 26], "seq_len": 18, "sequenc": [1, 18], "serd": [9, 15], "seri": 23, "serial": [0, 13, 14, 19, 20], "serializerdebugwrapp": 13, "serv": [15, 16, 22, 26, 27, 28], "server": [0, 9, 10, 14, 19, 20, 22, 26, 28], "server_fail": [0, 14], "server_storage_backend": 7, "server_success": [0, 14], "servermetamessag": [0, 14], "servic": [10, 27], "set": [9, 10, 15, 16, 20, 25, 29], "set_positional_encod": 1, "set_reverse_positional_encod": 1, "set_start_method": 21, "setup": [23, 25], "sh": [15, 23, 27], "sha256": 18, "shape": [1, 13, 18], "share": [19, 22, 27], "short": 1, "should": [1, 8, 9, 10, 13, 15, 16, 17, 18, 23, 24], "show": [23, 27], "shown": [20, 23, 27], "shut": [16, 27], "signific": 19, "similar": [16, 20], "simpli": 26, "singl": [1, 9, 13, 18, 22, 27], "size": [0, 1, 11, 12, 14, 15, 18, 19], "skip": 18, "skip_exist": 18, "sleep": 21, "slot_mapping_flat": 16, "slow": 20, "snapshot": 23, "so": [16, 27, 29], "some": [1, 19, 22, 23, 24, 25], "sourc": [0, 1, 8, 9, 10, 11, 12, 13, 17, 18, 27], "spawn": [21, 25], "special": 1, "specif": [18, 23], "specifi": [10, 20, 25], "speed": 27, "speedup": 28, "split": [1, 19], "spt": 1, "sptblendretriev": 1, "sptblendretrievertask": 1, "ssd": 27, "stage": 16, "standard": 27, "star": 28, "start": [1, 10, 11, 13, 16, 20, 22, 25, 26, 27], "start_idx": 18, "start_indic": 13, "start_lay": 13, "start_pos_list": 16, "start_ui": 27, "state": 16, "static": [0, 13, 26], "statu": 23, "stderr": 23, "step": [16, 25], "storag": [0, 11, 14, 15, 20, 23, 28], "storage_backend": [2, 14, 17], "storage_manag": 2, "store": [8, 9, 12, 16, 17, 18, 19, 20, 28], "str": [0, 1, 8, 9, 10, 11, 13, 15, 17, 18], "stream": [13, 16], "streamlit": 27, "string": 10, "structur": 23, "submodul": [5, 7, 14], "subpackag": 14, "sudo": 27, "suffix": 18, "suit": 23, "summar": 16, "support": [18, 20, 22, 23, 28], "sure": 25, "sweep": 9, "synchron": 19, "sys_prompt": 21, "system": 25, "system_messag": 25, "t": [13, 16, 25], "t1": [22, 24], "t2": [22, 24], "t3": [22, 24], "t4": [22, 24], "tail": 23, "take": [1, 27], "taken": 18, "talk": 21, "target": 18, "target_buff": 13, "target_dim": 1, "task": [1, 16], "temperatur": [21, 22, 24], "templat": 25, "tensor": [1, 8, 9, 10, 11, 12, 13, 16, 17, 18, 19], "tensor_parallel_s": 21, "term": 29, "termin": 27, "test": 12, "test_lmcache_local_cpu": 23, "text": [1, 20, 21, 22, 24, 28], "than": 27, "thei": [21, 27], "them": [13, 19], "therefor": 1, "thi": [1, 8, 9, 12, 15, 16, 17, 20, 21, 23, 24, 25, 26, 27], "thing": [8, 9, 17], "though": 19, "thread": 10, "three": 19, "through": 9, "throughout": 16, "throughput": 23, "thu": 28, "thudm": 29, "time": [16, 21, 22, 23, 24, 28], "time_taken": [22, 24], "timeout": 10, "tmp": 23, "to_byt": 13, "to_str": [0, 14], "token": [1, 8, 9, 13, 15, 16, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29], "token_chunk": 18, "token_dim": 1, "token_seg": 1, "top": 29, "top_p": [21, 22, 24], "torch": [1, 12, 13, 15, 16, 19, 20, 21, 26], "torch_quant": 13, "torch_quant_vector": 13, "torch_serd": 9, "torchdeseri": 13, "torchseri": 13, "total": 13, "tp": 23, "transform": [22, 24, 27], "transmiss": 19, "transmit": 19, "tree": 25, "tri": 26, "trigger": 27, "true": [8, 9, 10, 17, 18, 20, 21, 24], "ttft": [21, 23, 28], "tupl": [1, 8, 9, 10, 11, 13, 17, 18], "turn": 24, "two": [15, 16, 18, 22, 27], "txt": [21, 22, 24, 25], "type": [1, 10, 11, 13, 23, 25, 27], "typic": 27, "uint8": 13, "undefin": 1, "unit": 12, "until": 9, "unus": 27, "up": [9, 16, 29], "updat": [1, 9, 11], "update_on_get": 11, "update_on_put": 11, "upon": 16, "url": [10, 15, 27], "us": [1, 9, 10, 11, 12, 16, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29], "usabl": 18, "usag": [20, 23, 28], "user": [16, 21, 22, 24, 25], "user_input": [22, 24], "user_inputs_batch": [22, 24], "user_inputs_of_batch": [22, 24], "user_prompt": 21, "usr": 26, "util": [5, 14, 22, 25, 26], "v": [1, 13, 25], "v0": [21, 22, 24, 27, 29], "v1": [25, 29], "vaild_mask": 1, "valid": 1, "valid_mask": 1, "valu": [1, 9, 10, 11, 13, 15, 16], "value_bin": 13, "variabl": [1, 10], "ve": 22, "venv": 26, "verifi": 25, "via": [18, 26], "view": [12, 27], "visit": 25, "vllm": [1, 5, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 28, 29], "vllm_adapt": [5, 16], "vllm_inject": 16, "vllm_worker_multiproc_method": 25, "vspec": 13, "w": [22, 24], "wai": [15, 16, 22], "wait": 18, "want": 25, "warm": 27, "watch": 28, "we": [16, 19, 23, 26], "webui": 27, "weight": 27, "well": 28, "what": [21, 24], "when": [1, 11, 16, 19, 20, 26], "whenev": 19, "where": 1, "whether": [1, 8, 9, 15, 16, 17, 18, 20, 22, 24, 25], "which": [1, 16, 18, 23, 27], "while": [16, 18, 26], "who": 25, "within": 19, "without": 1, "word": [24, 27], "worker": 16, "worker_id": [0, 14], "world_siz": [0, 14], "wrap": 15, "wrapper": [16, 19], "write": [9, 13, 22, 23, 24, 25, 27], "x": [1, 15, 25], "xq": 13, "y": [1, 26], "yaml": [20, 21, 22, 24, 25], "yet": 16, "you": [15, 20, 21, 22, 23, 24, 25, 26, 29], "your": [22, 23, 24, 25, 26, 27, 29], "yourself": 27, "z": 1, "zip": 18}, "titles": ["LMCache Modules", "LMCache Blend", "lmcache.experimental package", "lmcache.experimental.storage_backend package", "lmcache.experimental.storage_backend.evictor package", "lmcache.integration package", "lmcache.integration.vllm package", "LMCache Server", "lmcache.server.server_storage_backend package", "LMCache Storage Backend", "lmcache.storage_backend.connector package", "lmcache.storage_backend.evictor package", "lmcache.storage_backend.mem_pool package", "lmcache.storage_backend.serde package", "lmcache", "Configuring LMCache", "LLM Engine", "LMCache Backend", "LMCache Engine", "LMCache Overview", "Selecting a backend", "KV blending", "Usage", "End-to-end measurements", "Saving the decode cache", "Docker Installation", "Pip Installation", "3 Min Quick Example: Docker + Speedup with vLLM", "Welcome to LMCache!", "Supported Models"], "titleterms": {"": 28, "3": 27, "abstract_backend": [3, 8, 9], "advanc": 28, "backend": [9, 17, 20], "base_connector": 10, "base_evictor": [4, 11], "base_pool": 12, "blend": [1, 21], "build": 25, "cach": 24, "cache_engin": 2, "cachegen_bas": 13, "cachegen_decod": 13, "cachegen_encod": 13, "clean": 27, "code": 26, "comapat": 26, "config": 2, "configur": [15, 28], "connector": 10, "contain": 25, "content": [1, 2, 3, 4, 5, 6, 11, 12], "decod": 24, "demo": 27, "detail": 28, "develop": 28, "do": 27, "docker": [25, 27], "document": 28, "end": 23, "engin": [16, 18], "environ": 15, "evictor": [4, 11], "exampl": [27, 28], "executor": 1, "experiment": [2, 3, 4], "fast_serd": 13, "file": 15, "from": 25, "further": 23, "get": 28, "gpu_connector": 2, "happen": 27, "how": [21, 22, 24], "hybrid_backend": 9, "imag": 25, "instal": [25, 26], "instanc": 19, "integr": [5, 6], "inter": 19, "interfac": 1, "introduct": 27, "kv": 21, "latest": 26, "level": 19, "llm": 16, "lm_connector": 10, "lmcach": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 28], "local_backend": [8, 9], "local_disk_backend": 3, "local_pool": 12, "log": 0, "lru_evictor": [4, 11], "matrix": 26, "measur": 23, "mem_pool": 12, "memory_manag": 2, "metric": 23, "min": 27, "model": [28, 29], "modul": [0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13], "need": 27, "next": 28, "overview": 19, "packag": [2, 3, 4, 5, 6, 8, 10, 11, 12, 13], "perform": [23, 27], "pip": 26, "prerequisit": 27, "protocol": 0, "pull": 25, "quick": 27, "quickstart": 26, "redis_connector": 10, "releas": 26, "remote_backend": 9, "requir": 26, "retriev": 1, "run": [23, 25, 27], "safe_serd": 13, "save": 24, "select": 20, "serd": 13, "server": [7, 8], "server_storage_backend": 8, "sourc": 25, "speedup": 27, "start": 28, "step": 27, "storag": 9, "storage_backend": [3, 4, 9, 10, 11, 12, 13], "storage_manag": 3, "submodul": [0, 1, 2, 3, 4, 6, 8, 9, 10, 11, 12, 13], "subpackag": [0, 2, 3, 5, 7, 9], "support": 29, "test": [23, 25], "token_databas": 2, "torch_serd": 13, "up": 27, "us": 15, "usag": 22, "util": [0, 6], "variabl": 15, "version": 26, "vllm": [6, 27], "vllm_adapt": 6, "welcom": 28, "what": [27, 28], "when": 27, "yaml": 15, "you": 27}})